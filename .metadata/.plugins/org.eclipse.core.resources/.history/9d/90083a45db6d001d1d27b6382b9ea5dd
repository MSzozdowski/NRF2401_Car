/*
 * clock.c
 *
 *  Created on: Nov 26, 2022
 *      Author: stasz
 */

#include "main.h"
#include "clock.h"

static uint32_t tick; //100us tickrate
TIM_HandleTypeDef *clock_tim;

void Clock_100us_Init(TIM_HandleTypeDef *htim)
{
	clock_tim = htim;
	HAL_TIM_Base_Start_IT(htim);
	tick = 0;
}

uint32_t Clock_GetTick()
{
	return tick;
}

void HAL_TIM_PeriodElapsedCallback(TIM_HandleTypeDef *htim)
{
	if(htim == clock_tim)
	{
		HAL_GPIO_TogglePin(TEST_OUT_GPIO_Port, TEST_OUT_Pin);
		tick++;
	}
}
